{% extends 'blog/base.html' %}
{% block content %}
<h5 class="blue-grey darken-1 header">{{poll.title}}</h5>

{% if error_message %}<p><strong style="color:red;">{{ error_message }}</strong></p>{% endif %}

<form style="padding-top: 1rem; padding-bottom:1rem; height:calc( 70vh - 4rem ); overflow-y: scroll;" class="container" method="POST" action="{% url 'poll-vote' poll.id %}">
    <div class="center-align">{{poll.content}}</div>
    {% csrf_token %}
    {% for optionset in poll.optionset_set.all %}
        <fieldset class="card">
            <legend>{{optionset.title}}</legend>
            {% for option in optionset.option_set.all %}
            <p>
                <label>
                    <input class="with-gap" id="{{option.id}}" {% if forloop.counter == 1 %} checked {% endif %} value="{{option.id}}" name="{{optionset.pk}}" type="radio">
                    <span>{{option.title}}</span>
                </label>
            </p>
            {% endfor %}
        </fieldset>
    {% endfor %}
    <div class="center-align">
        <button class="btn-small green lighten-2" type="submit">voten</button>
    </div>

</form>
<div class="right-align" style="margin-top:1rem;">
    <a class="btn-small blue-grey lighten-2" href="{% url 'polls-index' %}">back to mainpage</a>
    <a class="btn-small blue-grey lighten-2" href="{% url 'poll-results' poll.pk %}">go to results</a>
</div>
{% endblock content %}